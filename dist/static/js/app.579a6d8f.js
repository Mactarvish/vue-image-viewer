(function(){"use strict";var t={9262:function(t,e,i){var s=i(7195),o=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("ImageViewer")],1)},r=[],n=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"background"}),e("main",{staticClass:"main"},[0==t.singleBrowseMode?e("div",t._l(t.dirFilePathsMap,(function(i,s){return e("div",{key:s,attrs:{id:"path-and-image"}},[e("ImageList",{attrs:{rootUrl:t.rootUrl,srcDir:s,srcImagePaths:i,width:t.imageShowWidth,timestamp:t.timestamp.toString()}})],1)})),0):e("div",{staticClass:"show-single"},[e("button",{staticClass:"change-image-button",on:{click:function(e){return t.changeImage("last")}}},[t._v("上一张")]),e("div",{staticClass:"single-image-widget"},[e("h3",[t._v(" "+t._s(t.srcImagePaths[t.curImageIndex])+" ")]),e("AnnoImage",{attrs:{src:t.srcImagePaths[t.curImageIndex],width:512}})],1),e("button",{staticClass:"change-image-button",on:{click:function(e){return t.changeImage("next")}}},[t._v("下一张")])]),e("div",[t._v(" "+t._s(t.errInfo)+" ")])]),e("nav",[e("div",[e("el-input",{attrs:{placeholder:"展示该目录的图片",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.browseDir()}},model:{value:t.srcDir,callback:function(e){t.srcDir=e},expression:"srcDir"}})],1),e("div",[t._v("参与遍历的后缀名：")]),e("div",{staticClass:"postfixes"},[e("el-checkbox-group",{model:{value:t.checkedPostfixes,callback:function(e){t.checkedPostfixes=e},expression:"checkedPostfixes"}},t._l(t.filenamePostfixes,(function(i,s){return e("el-checkbox",{key:s,attrs:{label:i}},[t._v(t._s(i))])})),1)],1),e("el-radio-group",{model:{value:t.singleBrowseMode,callback:function(e){t.singleBrowseMode=e},expression:"singleBrowseMode"}},[e("el-radio",{attrs:{label:"0"}},[t._v("列表展示全部图片")]),e("el-radio",{attrs:{label:"1"}},[t._v("单图切换浏览")])],1),e("div",{staticClass:"label-bar"},[e("div",{staticClass:"label"},[t._v("图片显示宽度")]),e("el-slider",{staticClass:"bar",attrs:{step:10,max:1e3,min:10},model:{value:t.imageShowWidth,callback:function(e){t.imageShowWidth=e},expression:"imageShowWidth"}})],1),e("el-button",{ref:"preview",on:{click:t.browseDir}},[t._v("预览")]),e("div",{staticClass:"history"},t._l(t.historyDirs,(function(i){return e("el-tag",{key:i,attrs:{closable:""},on:{close:function(e){return t.RemoveHistoryItem(i)}}},[e("span",{staticClass:"history-dir",on:{click:function(e){return t.clickHistory(e)}}},[t._v(t._s(i))])])})),1),e("div",{staticClass:"info-for-clicked-image"},[e("div",{staticStyle:{"pointer-events":"none","user-select":"none"}},[t._v("点击的图像路径 ")]),t._v(" "+t._s(this.clickedImagePath)+" "),e("div",{staticStyle:{"pointer-events":"none","user-select":"none"}},[t._v("点击的图像名称 ")]),t._v(" "+t._s(this.clickedImageName)+" ")])],1)])},a=[],l=(i(7658),function(){var t=this,e=t._self._c;return e("div",{ref:"root",staticClass:"folder"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.showTooltip,expression:"showTooltip"}],ref:"tooltip",staticClass:"tooltip"},[t._v(t._s(t.tooltipContent))]),e("h3",[t._v(t._s(t.srcDir))]),t._l(t.srcImagePaths,(function(i){return e("img",{key:i,attrs:{src:t.rootUrl+i+`?timestamp=${t.timestamp}`,width:t.width,alt:i},on:{click:t.copyImagePath,mousemove:t.updateTooltip,mouseleave:t.closeTooltip}})}))],2)}),c=[],h={name:"ImageList",props:{rootUrl:String,srcDir:String,srcImagePaths:Array,timestamp:String,width:{type:Number,default:200}},data(){return{showTooltip:!1,tooltipContent:""}},methods:{updateTooltip(t){this.tooltipContent=t.target.src,this.showTooltip=!0,this.$refs.tooltip.style.top=`${t.clientY+10}px`,this.$refs.tooltip.style.left=`${t.clientX+10}px`},closeTooltip(){this.showTooltip=!1},copyImagePath(t){const e=document.createElement("button");e.setAttribute("class","cb");let i=t.target.src.match("(\\d{4})(.*?)(\\?)")[2];e.setAttribute("data-clipboard-text",i),document.body.appendChild(e),e.click(),e.remove();let s=new FormData;s.append("clickedImagePath",t.target.src);let o=this.rootUrl+"/clickImagePath";this.$axios.get(o,{params:{clickedImagePath:t.target.src}}).then((t=>{console.log(t.data),this.dirFilePathsMap=t.data})).catch((t=>{console.log(t),this.errInfo="错误信息："+t+"\n请检查目录是否存在"}))}}},u=h,d=i(1001),p=(0,d.Z)(u,l,c,!1,null,null,null),m=p.exports,g=i(4713),f=i.n(g),v={name:"ImageViewer",components:{ImageList:m},props:{},data(){return{srcImagePaths:[],dirFilePathsMap:{},srcDir:"/Users/mactarvish/Desktop/vue-test",errInfo:"",rootUrl:"http://localhost:8003",filenamePostfixes:[".jpg",".png",".PNG",".gif",".JPG",".bmp",".BMP",".jpeg"],checkedPostfixes:[".jpg",".png",".PNG",".gif",".JPG",".bmp",".BMP",".jpeg"],singleBrowseMode:"0",curImageIndex:0,imageShowWidth:200,timestamp:"",historyDirs:[],clickedImagePath:"",clickedImageName:""}},watch:{singleBrowseMode:{handler(t,e){console.log(t,e)}}},mounted(){this.clipboard=new(f())(".cb"),this.clipboard.on("success",(t=>{console.log(t.text),this.$message(`复制成功： ${t.text}`),this.clickedImagePath=t.text,this.clickedImageName=t.text.split("/").pop()})),this.clipboard.on("error",(()=>{this.$alert("草台，复制失败了")}))},methods:{browseDir(){let t=new FormData;t.append("recursive",!0),t.append("srcDir",this.srcDir),t.append("postfixes",this.checkedPostfixes);let e=this.rootUrl+"/getAllImagePaths";this.$axios.post(e,t).then((t=>{this.dirFilePathsMap=t.data;const e=this.dirFilePathsMap.state;console.log(e),delete this.dirFilePathsMap.state,"not exist"!=e?(this.timestamp=(new Date).getTime(),this.srcImagePaths=[],this.errInfo="",this.historyDirs.includes(this.srcDir)||this.historyDirs.push(this.srcDir)):this.$message(`目录 ${this.srcDir} 不存在！`)})).catch((t=>{console.log(t)}))},changeImage(t){console.log(t),"next"===t?this.curImageIndex=Math.min(this.srcImagePaths.length-1,this.curImageIndex+1):"last"===t?this.curImageIndex=Math.max(0,this.curImageIndex-1):console.log("未定义切换图片行为"),console.log(this.curImageIndex)},RemoveHistoryItem(t){this.historyDirs.splice(this.historyDirs.indexOf(t),1)},clickHistory(t){this.srcDir=t.target.textContent,this.browseDir()}}},b=v,I=(0,d.Z)(b,n,a,!1,null,null,null),w=I.exports,x={name:"App",components:{ImageViewer:w}},k=x,y=(0,d.Z)(k,o,r,!1,null,null,null),_=y.exports,P=i(8428),D=i.n(P),C=i(8213),M=i.n(C);s["default"].config.productionTip=!1,s["default"].prototype.$axios=D(),s["default"].use(M()),new s["default"]({render:t=>t(_)}).$mount("#app")}},e={};function i(s){var o=e[s];if(void 0!==o)return o.exports;var r=e[s]={id:s,loaded:!1,exports:{}};return t[s].call(r.exports,r,r.exports,i),r.loaded=!0,r.exports}i.m=t,function(){i.amdO={}}(),function(){var t=[];i.O=function(e,s,o,r){if(!s){var n=1/0;for(h=0;h<t.length;h++){s=t[h][0],o=t[h][1],r=t[h][2];for(var a=!0,l=0;l<s.length;l++)(!1&r||n>=r)&&Object.keys(i.O).every((function(t){return i.O[t](s[l])}))?s.splice(l--,1):(a=!1,r<n&&(n=r));if(a){t.splice(h--,1);var c=o();void 0!==c&&(e=c)}}return e}r=r||0;for(var h=t.length;h>0&&t[h-1][2]>r;h--)t[h]=t[h-1];t[h]=[s,o,r]}}(),function(){i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,{a:e}),e}}(),function(){i.d=function(t,e){for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){i.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={143:0};i.O.j=function(e){return 0===t[e]};var e=function(e,s){var o,r,n=s[0],a=s[1],l=s[2],c=0;if(n.some((function(e){return 0!==t[e]}))){for(o in a)i.o(a,o)&&(i.m[o]=a[o]);if(l)var h=l(i)}for(e&&e(s);c<n.length;c++)r=n[c],i.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return i.O(h)},s=self["webpackChunkvue2_image_viewer"]=self["webpackChunkvue2_image_viewer"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=i.O(void 0,[998],(function(){return i(9262)}));s=i.O(s)})();
//# sourceMappingURL=app.579a6d8f.js.map